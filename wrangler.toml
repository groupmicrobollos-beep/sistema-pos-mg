# wrangler.toml
name = "sistema-pos-mg"
compatibility_date = "2025-08-14"
main = "frontend/worker.js"

# Configuración de Pages
[build]
command = "cd frontend && npm install && npm run build"

[site]
bucket = "./frontend"
entry-point = "./worker.js"

# Configuración de Pages
pages_build_output_dir = "frontend/dist"

# Configuración de Functions
[functions]
directory = "functions"
include = ["api/**/*.js"]
exclude = ["**/*.test.js", "**/*.spec.js"]

# Configuración de assets
[assets]
include = ["frontend/js/**/*", "frontend/assets/**/*", "frontend/dist/**/*"]
exclude = ["frontend/functions/**/*", "frontend/node_modules/**/*"]

# Configuración de la base de datos D1
[[d1_databases]]
binding = "DB"
database_name = "sistema-pos-mg"
database_id = "a87247bd-4618-44da-9aaf-9c8874c29805"

# Variables de entorno
[env.production]
name = "sistema-pos-mg-prod"
[[env.production.d1_databases]]
binding = "DB"
database_name = "sistema-pos-mg"
database_id = "a87247bd-4618-44da-9aaf-9c8874c29805"

[env.development]
name = "sistema-pos-mg-dev"
